/* Tiptap Editor 专用样式 - 避免全局样式影响 */


/* CSS 变量定义 */

:root {
    /* Light 主题变量 (默认) */
    --tiptap-text-primary: #1f2937;
    --tiptap-text-secondary: #374151;
    --tiptap-text-muted: #6b7280;
    --tiptap-text-disabled: #9ca3af;
    --tiptap-bg-primary: #f3f4f6;
    --tiptap-bg-secondary: #f9fafb;
    --tiptap-border-primary: #d1d5db;
    --tiptap-code-bg: #f3f4f6;
    --tiptap-blockquote-bg: rgba(255, 107, 107, 0.1);
    --tiptap-table-header-bg: #f9fafb;
    --tiptap-selection-bg: rgba(255, 107, 107, 0.3);
}


/* Dark 主题变量 */

#tiptap-preview.light {
    --tiptap-text-primary: #ffffff;
    --tiptap-text-secondary: #cccccc;
    --tiptap-text-muted: #a8a8a8;
    --tiptap-text-disabled: #888888;
    --tiptap-bg-primary: #2a2a2a;
    --tiptap-bg-secondary: #45454c;
    --tiptap-border-primary: #444444;
    --tiptap-code-bg: #2a2a2a;
    --tiptap-blockquote-bg: rgba(255, 107, 107, 0.05);
    --tiptap-table-header-bg: #2a2a2a;
    --tiptap-selection-bg: rgba(255, 107, 107, 0.3);
}

#tiptap-preview {
    /* 富文本预览区域样式重置 */
    .prose {
        /* 重置全局样式影响 */
        color: var(--tiptap-text-primary) !important;
        /* 标题样式 */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            color: var(--tiptap-text-primary) !important;
            font-weight: 600 !important;
            margin-top: 1.5em !important;
            margin-bottom: 0.5em !important;
            line-height: 1.3 !important;
            font-size: 1em !important;
        }
        h1 {
            font-size: 1.5em !important;
            margin-top: 1em !important;
        }
        h2 {
            font-size: 1.25em !important;
            margin-top: 1em !important;
        }
        h3 {
            font-size: 1.1em !important;
            margin-top: 1em !important;
        }
        /* 段落样式 */
        p {
            color: var(--tiptap-text-primary) !important;
            line-height: 1.6 !important;
            margin-bottom: 1em !important;
            font-size: 0.9em !important;
        }
        /* 列表样式 */
        ul,
        ol {
            color: var(--tiptap-text-primary) !important;
            padding-left: 1.5em !important;
            margin-bottom: 1.2em !important;
            margin-top: 0.8em !important;
            list-style-position: outside !important;
            font-size: 0.9em !important;
        }
        /* 无序列表 */
        ul {
            list-style-type: none !important;
            padding-left: 1.5em !important;
            li {
                color: var(--tiptap-text-primary) !important;
                margin-bottom: 0.4em !important;
                line-height: 1.5 !important;
                position: relative !important;
                padding-left: 0.5em !important;
                &::before {
                    content: '•' !important;
                    color: var(--color-primary) !important;
                    font-weight: bold !important;
                    font-size: 1.2em !important;
                    position: absolute !important;
                    left: -0.8em !important;
                    top: 0.1em !important;
                }
            }
        }
        /* 有序列表 */
        ol {
            list-style-type: none !important;
            padding-left: 1.8em !important;
            counter-reset: ol-counter !important;
            li {
                color: var(--tiptap-text-primary) !important;
                margin-bottom: 0.4em !important;
                line-height: 1.5 !important;
                position: relative !important;
                padding-left: 0.3em !important;
                counter-increment: ol-counter !important;
                &::before {
                    content: counter(ol-counter) '.' !important;
                    color: var(--color-primary) !important;
                    font-weight: 600 !important;
                    font-size: 1em !important;
                    position: absolute !important;
                    left: -1.2em !important;
                    top: 0.1em !important;
                    width: 1em !important;
                    text-align: right !important;
                }
            }
        }
        /* 粗体和斜体 */
        strong,
        b {
            color: var(--tiptap-text-primary) !important;
            font-weight: 700 !important;
        }
        em,
        i {
            color: var(--tiptap-text-muted) !important;
            font-style: italic !important;
        }
        /* 删除线 */
        s,
        del {
            color: var(--tiptap-text-disabled) !important;
            text-decoration: line-through !important;
        }
        /* 链接样式 */
        a {
            color: var(--color-primary) !important;
            text-decoration: underline !important;
            transition: color 0.2s ease !important;
            &:hover {
                color: var(--color-primary) !important;
            }
        }
        /* 代码块样式 */
        pre {
            background: var(--tiptap-code-bg) !important;
            border: 1px solid var(--tiptap-border-primary) !important;
            border-radius: 0.375rem !important;
            padding: 1em !important;
            margin: 1.2em 0 !important;
            overflow-x: auto !important;
            code {
                background: transparent !important;
                color: var(--tiptap-text-primary) !important;
                font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace !important;
                font-size: 0.85em !important;
                line-height: 1.5 !important;
            }
        }
        /* 内联代码样式 */
        code {
            background: var(--tiptap-code-bg) !important;
            color: var(--color-primary) !important;
            padding: 0.15em 0.3em !important;
            border-radius: 0.25rem !important;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace !important;
            font-size: 0.85em !important;
            border: 1px solid var(--tiptap-border-primary) !important;
        }
        /* 引用块样式 */
        blockquote {
            border-left: 4px solid var(--color-primary) !important;
            padding: 1em 1.2em !important;
            margin: 1.2em 0 !important;
            color: var(--tiptap-text-secondary) !important;
            font-style: italic !important;
            background: var(--tiptap-blockquote-bg) !important;
            border-radius: 0.375rem !important;
            line-height: 1.6 !important;
            font-size: 0.9em !important;
        }
        /* 表格样式 */
        table {
            width: 100% !important;
            border-collapse: collapse !important;
            margin: 1.5em 0 !important;
            font-size: 0.9em !important;
            th,
            td {
                border: 1px solid var(--tiptap-border-primary) !important;
                padding: 0.6em 1em !important;
                text-align: left !important;
                line-height: 1.5 !important;
            }
            th {
                background: var(--tiptap-table-header-bg) !important;
                color: var(--tiptap-text-primary) !important;
                font-weight: 600 !important;
            }
            td {
                color: var(--tiptap-text-primary) !important;
            }
            tr:nth-child(even) {
                background: var(--tiptap-bg-secondary) !important;
            }
        }
        /* 水平线 */
        hr {
            border: none !important;
            border-top: 2px solid var(--tiptap-border-primary) !important;
            margin: 2.5em 0 !important;
        }
        /* 图片样式 */
        img {
            max-width: 100% !important;
            height: auto !important;
            border-radius: 0.375rem !important;
            margin: 1.5em 0 !important;
        }
    }
    /* 编辑器内部样式 */
    .tiptap-editor {
        .ProseMirror {
            outline: none !important;
            color: var(--tiptap-text-primary) !important;
            /* 占位符样式 */
            p.is-editor-empty:first-child::before {
                color: var(--tiptap-text-disabled) !important;
                content: attr(data-placeholder) !important;
                float: left !important;
                height: 0 !important;
                pointer-events: none !important;
            }
            /* 选中文本样式 */
            &::selection {
                background: var(--tiptap-selection-bg) !important;
            }
        }
    }
}